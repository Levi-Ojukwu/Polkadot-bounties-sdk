{"version":3,"file":"continue-with.mjs","sources":["../../../src/utils/continue-with.ts"],"sourcesContent":["import { Observable } from \"rxjs\"\n\nlet NOTIN = {}\nexport const continueWith =\n  <I, O>(\n    mapper: (input: I) => Observable<O>,\n  ): ((source: Observable<I>) => Observable<I | O>) =>\n  (source) =>\n    new Observable((observer) => {\n      let latestValue: I = NOTIN as I\n      let subscription = source.subscribe({\n        next(v) {\n          observer.next((latestValue = v))\n        },\n        error(e) {\n          observer.error(e)\n        },\n        complete() {\n          if (latestValue === NOTIN) observer.complete()\n          else subscription = mapper(latestValue).subscribe(observer)\n        },\n      })\n\n      return () => {\n        subscription.unsubscribe()\n      }\n    })\n"],"names":[],"mappings":";;AAEA,IAAI,QAAQ,EAAC;AACN,MAAM,YAAA,GACX,CACE,MAAA,KAEF,CAAC,WACC,IAAI,UAAA,CAAW,CAAC,QAAA,KAAa;AAC3B,EAAA,IAAI,WAAA,GAAiB,KAAA;AACrB,EAAA,IAAI,YAAA,GAAe,OAAO,SAAA,CAAU;AAAA,IAClC,KAAK,CAAA,EAAG;AACN,MAAA,QAAA,CAAS,IAAA,CAAM,cAAc,CAAE,CAAA;AAAA,IACjC,CAAA;AAAA,IACA,MAAM,CAAA,EAAG;AACP,MAAA,QAAA,CAAS,MAAM,CAAC,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,QAAA,GAAW;AACT,MAAA,IAAI,WAAA,KAAgB,KAAA,EAAO,QAAA,CAAS,QAAA,EAAS;AAAA,WACxC,YAAA,GAAe,MAAA,CAAO,WAAW,CAAA,CAAE,UAAU,QAAQ,CAAA;AAAA,IAC5D;AAAA,GACD,CAAA;AAED,EAAA,OAAO,MAAM;AACX,IAAA,YAAA,CAAa,WAAA,EAAY;AAAA,EAC3B,CAAA;AACF,CAAC;;;;"}