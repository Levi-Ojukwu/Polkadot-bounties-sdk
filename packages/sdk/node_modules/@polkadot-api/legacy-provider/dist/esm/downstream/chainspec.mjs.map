{"version":3,"file":"chainspec.mjs","sources":["../../../src/downstream/chainspec.ts"],"sourcesContent":["import { createUpstream } from \"@/upstream/upstream\"\n\nexport const chainSpecMethods = Object.fromEntries(\n  [\"chainName\", \"genesisHash\", \"properties\"].map(\n    (key) => [key, `chainSpec_v1_${key}`] as const,\n  ),\n)\n\nexport const createChainSpec = (\n  upstream: ReturnType<typeof createUpstream>,\n  reply: (id: string, result: any) => void,\n  err: (id: string, code: number, msg: string) => void,\n) => {\n  return (rId: string, method: string) => {\n    const [, , name] = method.split(\"_\")\n    const observable =\n      upstream[name as \"chainName\" | \"genesisHash\" | \"properties\"]\n    if (!observable) throw null\n\n    observable.subscribe(\n      (result) => {\n        reply(rId, result)\n      },\n      (e: any) => {\n        console.error(e)\n        err(rId, -32602, \"Invalid\")\n      },\n    )\n  }\n}\n"],"names":[],"mappings":"AAEO,MAAM,mBAAmB,MAAA,CAAO,WAAA;AAAA,EACrC,CAAC,WAAA,EAAa,aAAA,EAAe,YAAY,CAAA,CAAE,GAAA;AAAA,IACzC,CAAC,GAAA,KAAQ,CAAC,GAAA,EAAK,CAAA,aAAA,EAAgB,GAAG,CAAA,CAAE;AAAA;AAExC;AAEO,MAAM,eAAA,GAAkB,CAC7B,QAAA,EACA,KAAA,EACA,GAAA,KACG;AACH,EAAA,OAAO,CAAC,KAAa,MAAA,KAAmB;AACtC,IAAA,MAAM,KAAK,IAAI,CAAA,GAAI,MAAA,CAAO,MAAM,GAAG,CAAA;AACnC,IAAA,MAAM,UAAA,GACJ,SAAS,IAAkD,CAAA;AAC7D,IAAA,IAAI,CAAC,YAAY,MAAM,IAAA;AAEvB,IAAA,UAAA,CAAW,SAAA;AAAA,MACT,CAAC,MAAA,KAAW;AACV,QAAA,KAAA,CAAM,KAAK,MAAM,CAAA;AAAA,MACnB,CAAA;AAAA,MACA,CAAC,CAAA,KAAW;AACV,QAAA,OAAA,CAAQ,MAAM,CAAC,CAAA;AACf,QAAA,GAAA,CAAI,GAAA,EAAK,QAAQ,SAAS,CAAA;AAAA,MAC5B;AAAA,KACF;AAAA,EACF,CAAA;AACF;;;;"}