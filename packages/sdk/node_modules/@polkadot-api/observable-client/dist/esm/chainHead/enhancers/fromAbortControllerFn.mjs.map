{"version":3,"file":"fromAbortControllerFn.mjs","sources":["../../../../src/chainHead/enhancers/fromAbortControllerFn.ts"],"sourcesContent":["import { Observable } from \"rxjs\"\n\nexport const fromAbortControllerFn =\n  <A extends Array<any>, T>(\n    fn: (...args: [...A, ...[abortSignal: AbortSignal]]) => Promise<T>,\n  ) =>\n  (...args: A): Observable<T> =>\n    new Observable((observer) => {\n      let aborter: AbortController | undefined = new AbortController()\n\n      fn(...[...args, aborter.signal]).then(\n        (value: any) => {\n          observer.next(value)\n          observer.complete()\n        },\n        (error: any) => {\n          observer.error(error)\n        },\n      )\n\n      return () => {\n        observer.unsubscribe()\n        aborter!.abort()\n        aborter = undefined\n      }\n    })\n"],"names":[],"mappings":";;AAEO,MAAM,qBAAA,GACX,CACE,EAAA,KAEF,CAAA,GAAI,SACF,IAAI,UAAA,CAAW,CAAC,QAAA,KAAa;AAC3B,EAAA,IAAI,OAAA,GAAuC,IAAI,eAAA,EAAgB;AAE/D,EAAA,EAAA,CAAG,GAAG,CAAC,GAAG,MAAM,OAAA,CAAQ,MAAM,CAAC,CAAA,CAAE,IAAA;AAAA,IAC/B,CAAC,KAAA,KAAe;AACd,MAAA,QAAA,CAAS,KAAK,KAAK,CAAA;AACnB,MAAA,QAAA,CAAS,QAAA,EAAS;AAAA,IACpB,CAAA;AAAA,IACA,CAAC,KAAA,KAAe;AACd,MAAA,QAAA,CAAS,MAAM,KAAK,CAAA;AAAA,IACtB;AAAA,GACF;AAEA,EAAA,OAAO,MAAM;AACX,IAAA,QAAA,CAAS,WAAA,EAAY;AACrB,IAAA,OAAA,CAAS,KAAA,EAAM;AACf,IAAA,OAAA,GAAU,MAAA;AAAA,EACZ,CAAA;AACF,CAAC;;;;"}